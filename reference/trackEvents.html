<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Track events, the submit or the quit buttons — trackEvents • learnitdown</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- svPkgdown --><script src="../script.js"></script><!-- themify icon --><link rel="stylesheet" href="../themify-icons.css?nocache=123"><!--<link rel="stylesheet" href="../style.css?nocache=123">--><!-- bootstrat v4.1.1, required CSS from more recent version --><link rel="stylesheet" href="../bootstrap.more.css?nocache=123"><link href="../style.css?nocache=123" rel="stylesheet"><!-- end of addition for svPkgdown --><meta property="og:title" content="Track events, the submit or the quit buttons — trackEvents"><meta property="og:description" content="These functions provide the required code to be inserted in the server part
of a Shiny application to track events (start, stop, inputs, outputs, errors,
result or quit), to check the answer when the user clicks on the submit
button and to cleanly close the application when the user clicks on the quit
button."><meta name="twitter:card" content="summary"><!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><!-- preloader start --><div class="preloader">
  <img src="../preloader.gif" alt="loading..."></div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="external-link navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews"></a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q" placeholder="Search..." required><input type="hidden" name="sitesearch" value="https://www.sciviews.org"></div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/learnitdown.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/learnitdown/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class="h2">learnitdown <small>v1.5.1</small></p></a>
      </div>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Track events, the submit or the quit buttons</h1>
    <small class="dont-index">Source: <a href="https://github.com/SciViews/learnitdown/blob/HEAD/R/learnitdown_shiny.R" class="external-link"><code>R/learnitdown_shiny.R</code></a></small>
    <div class="hidden name"><code>trackEvents.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions provide the required code to be inserted in the server part
of a Shiny application to track events (start, stop, inputs, outputs, errors,
result or quit), to check the answer when the user clicks on the submit
button and to cleanly close the application when the user clicks on the quit
button.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">trackEvents</span><span class="op">(</span>
  <span class="va">session</span>,
  <span class="va">input</span>,
  <span class="va">output</span>,
  sign_in.fun <span class="op">=</span> <span class="cn">NULL</span>,
  url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_URL"</span><span class="op">)</span>,
  url.server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_URL_SERVER"</span><span class="op">)</span>,
  db <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_BASE"</span><span class="op">)</span>,
  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_USER"</span><span class="op">)</span>,
  password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MONGO_PASSWORD"</span><span class="op">)</span>,
  version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"learnitdown.shiny.version"</span><span class="op">)</span>,
  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LEARNITDOWN_LOCAL_STORAGE"</span>, <span class="st">"shiny_logs"</span><span class="op">)</span>,
  log.errors <span class="op">=</span> <span class="cn">TRUE</span>,
  log.outputs <span class="op">=</span> <span class="cn">FALSE</span>,
  drop.dir <span class="op">=</span> <span class="cn">TRUE</span>,
  config <span class="op">=</span> <span class="cn">NULL</span>,
  debug <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LEARNITDOWN_DEBUG"</span>, <span class="fl">0</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">0</span>
<span class="op">)</span>

<span class="fu">trackSubmit</span><span class="op">(</span>
  <span class="va">session</span>,
  <span class="va">input</span>,
  <span class="va">output</span>,
  solution <span class="op">=</span> <span class="cn">NULL</span>,
  max_score <span class="op">=</span> <span class="cn">NULL</span>,
  comment <span class="op">=</span> <span class="st">""</span>,
  message.success <span class="op">=</span> <span class="st">"Correct"</span>,
  message.error <span class="op">=</span> <span class="st">"Incorrect"</span>,
  score.txt <span class="op">=</span> <span class="st">"Score"</span>,
  check.solution <span class="op">=</span> <span class="va">check_shiny_solution</span>
<span class="op">)</span>

<span class="fu">trackQuit</span><span class="op">(</span><span class="va">session</span>, <span class="va">input</span>, <span class="va">output</span>, delay <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>

<span class="fu">check_shiny_solution</span><span class="op">(</span><span class="va">answer</span>, <span class="va">solution</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>session</dt>
<dd><p>The current Shiny <code>session</code>.</p></dd>
<dt>input</dt>
<dd><p>The Shiny <code>input</code> object.</p></dd>
<dt>output</dt>
<dd><p>The Shiny <code>output</code> object.</p></dd>
<dt>sign_in.fun</dt>
<dd><p>The function that can get user info from the
<code><a href="config.html">sign_in()</a></code>, or <code>NULL</code> by default to disable using local user data.</p></dd>
<dt>url</dt>
<dd><p>The URL to reach the MongoDB database. By default, it is read from
the <code>MONGO_URL</code> environment variable.</p></dd>
<dt>url.server</dt>
<dd><p>The URL to reach the MongoDB database. By default, it is
read from the <code>MONGO_URL_SERVER</code> environment variable.</p></dd>
<dt>db</dt>
<dd><p>The database to populate in the MongoDB database. By default, it is
read from the <code>MONGO_BASE</code> environment variable.</p></dd>
<dt>user</dt>
<dd><p>The user login to the MongoDB database. By default, it is
read from the <code>MONGO_USER</code> environment variable.</p></dd>
<dt>password</dt>
<dd><p>The password to access the MongoDB database. By default, it
is read from the <code>MONGO_PASSWORD</code> environment variable.</p></dd>
<dt>version</dt>
<dd><p>The version of the current Shiny application. By default, it
is the <code>learnitdown.shiny.version</code> option, as set by
<code><a href="learnitdownShiny.html">learnitdownShinyVersion()</a></code>.</p></dd>
<dt>path</dt>
<dd><p>The path where the temporary <code>shinylogs</code> log files are stored. By
default, it is set to the <code>LEARNITDOWN_LOCAL_STORAGE</code> environment variable,
or to <code>shiny_logs</code> subdirectory of the application if not defined. If that
directory is not writable, a temporary directory is used instead.</p></dd>
<dt>log.errors</dt>
<dd><p>Do we log error events (yes by default)?</p></dd>
<dt>log.outputs</dt>
<dd><p>Do we log output events (no by default)?</p></dd>
<dt>drop.dir</dt>
<dd><p>Do we erase the directory indicated by <code>path =</code> if it is
empty at the end of the process (yes by default).</p></dd>
<dt>config</dt>
<dd><p>The result of the call to <code><a href="config.html">config()</a></code>, if done.</p></dd>
<dt>debug</dt>
<dd><p>Do we debug recording of events using extra messages? By
default, it is the value of the environment variable <code>LEARNITDOWN_DEBUG</code>, and
debugging is activated when that value is different to <code>0</code>.</p></dd>
<dt>solution</dt>
<dd><p>The correct solution as a named list. Names are the
application inputs to check and their values are the correct values. The
current state of these inputs will be compared against the solution, and the
<code>message.success</code> or <code>message.error</code> is displayed accordingly. Also a result
event is triggered with the <code>correct</code> field set to <code>TRUE</code> or <code>FALSE</code>
accordingly. If <code>solution = NULL</code>, then the answer is considered to be always
correct (use this if you just want to indicate that the user's answer is
recorded in the database). For numeric values, use `c(min = x, max = y) to
check if values are within a range.</p></dd>
<dt>max_score</dt>
<dd><p>The highest score value that could be attributed if the
exercise is correctly done. By default, it is <code>NULL</code> meaning that the higher
score would be equal to the number of items to check in <code>solution</code>.</p></dd>
<dt>comment</dt>
<dd><p>A string with a comment to append to the value of the result
event.</p></dd>
<dt>message.success</dt>
<dd><p>The message to display is the answer is correct
("Correct" by default).</p></dd>
<dt>message.error</dt>
<dd><p>The message to display if the answer is wrong
("Incorrect" by default).</p></dd>
<dt>score.txt</dt>
<dd><p>The word to use for "score" ("Score" by default).</p></dd>
<dt>check.solution</dt>
<dd><p>The function to use to check if solution provided by
a Shiny application is correct or not. By default, it is
<code>check_shiny_solution()</code>.</p></dd>
<dt>delay</dt>
<dd><p>The time to wait before we close the Shiny application in sec
(60 sec by default). If <code>delay = -1</code>, the application is <strong>not</strong> closed, only
the session is closed when the user clicks on the quit button.</p></dd>
<dt>answer</dt>
<dd><p>A named list of the answer data to check against solution. This
object is provided by <code>trackSubmit()</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The code to be inserted in the server part of the learnitdown Shiny
application in order to properly identify the user and record the events.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="learnitdownShiny.html">learnitdownShinyVersion()</a></code>, <code><a href="config.html">sign_in()</a></code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><!-- footer --><!--<footer class="bg-secondary">--><div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo"><p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline"><li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul></div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links"><li>
                            <a href="http://econum.umons.ac.be" class="external-link">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/" class="external-link">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/" class="external-link">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/" class="external-link">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/" class="external-link">UMONS</a>
                        </li>

                    </ul></div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links"><li>
                            <a href="https://www.sciviews.org/software/svbox" class="external-link">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r" class="external-link">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage" class="external-link">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog" class="external-link">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about" class="external-link">About</a>
                        </li>

                    </ul></div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> © All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right"><li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="external-link font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul></div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer></div>

  


  

  </body></html>

